<!doctype html>
<html class="no-js">

<head>
    <meta charset="utf-8">
    <meta name="description" content="Yuanbo She's blog">
    <meta name="author" content="Yuanbo She">
    <title>How to initialise a package to generate Sphinx documentation | Yuanbo She</title>
    <meta name="baidu-site-verification" content="ffaIcavBJ8"/>
    <meta name="ujianVerification" content="e4d1651983db8731b2591d1b93719116"/>

    <!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <!-- Adding "maximum-scale=1" fixes the Mobile Safari auto-zoom bug: http://filamentgroup.com/examples/iosScaleBug/ -->
</head>

<body lang="zh">

<header class="clearfix">
    <div class="wrapper">
        <div id="logo" class="clearfix">
            <a href="http://yuanboshe.github.io/index.html" id="name">
                <h1>Yuanbo She</h1>
            </a>
            <a href="http://blog.exbot.net">
                <img src="http://yuanboshe.github.io/theme/img/logo.png" alt="ExBot's Blog"></a>
            <a href="http://lamda.nju.edu.cn">
                <img src="http://yuanboshe.github.io/theme/img/lamda.png" alt="Lamda Lab"></a>
            <a href="http://www.nju.edu.cn/">
                <img src="http://yuanboshe.github.io/theme/img/nju.png" alt="Nanjing University"></a>
        </div>
        <nav class="float">
            <ul id="nav" class="sf-menu">
                <li ><a
                        href="http://yuanboshe.github.io/blog/index.html">Blog</a>
                </li>
                <li class="divider-vertical"></li>
                    <li>
                        <a href="http://yuanboshe.github.io/blog/category/ros.html">
                            <i class="icon-folder-open icon-large"></i>ROS
                        </a>
                    </li>
                    <li>
                        <a href="http://yuanboshe.github.io/blog/category/webqian-duan.html">
                            <i class="icon-folder-close icon-large"></i>WEB前端
                        </a>
                    </li>
            </ul>
        </nav>
    </div>
</header>

<!-- MAIN -->
<div id="main">
    <div class="wrapper clearfix">
    <!-- post list -->
    <div id="posts-list">
        <h2 class="page-heading"><span>How to initialise a package to generate Sphinx documentation</span></h2>
    <article class="format-standard">
<div class="meta">
    <div class="date">
        <i class="icon-calendar icon-large"></i>
        <abbr class="published" title="2015-01-02T00:00:00">
            2015-01-02
        </abbr>
    </div>
        <div class="author">
            <i class="icon-user icon-large"></i>
            <a href="http://yuanboshe.github.io/about.html">Yuanbo She</a>
        </div>
    <div class="category">
        <i class="icon-folder-open icon-large"></i>
        <a href="http://yuanboshe.github.io/blog/category/ros.html">ROS</a>
    </div>
</div>        <div class="post-content">
            <div class="summary">
                <p>now let me test <tt class="docutils literal">pre color</tt> dfdsfsa</p>
<div class="sidebar">
<p class="first sidebar-title">Summary</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Topic:</th><td class="field-body">reST and Sphinx documentation</td>
</tr>
<tr class="field"><th class="field-name">Date:</th><td class="field-body">2013-10-28</td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Thomas Cokelaer</td>
</tr>
<tr class="field"><th class="field-name">status:</th><td class="field-body">mature</td>
</tr>
</tbody>
</table>
</div>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#update-setuptools-configuration-file" id="id1">Update setuptools configuration file</a></li>
<li><a class="reference internal" href="#obtain-a-valid-sphinx-configuration-file" id="id2">Obtain a valid sphinx configuration file</a></li>
<li><a class="reference internal" href="#update-the-package-metainfo-file" id="id3">Update the package metainfo file</a></li>
<li><a class="reference internal" href="#setup-the-source-rest-files" id="id4">Setup the source (ReST) files</a></li>
<li><a class="reference internal" href="#checking-the-configuration" id="id5">Checking the configuration</a></li>
<li><a class="reference internal" href="#what-are-static-and-build-directories" id="id6">What are _static and _build directories ...</a></li></ul></div>
            </div>
            <p>now let me test <tt class="docutils literal">pre color</tt> dfdsfsa</p>
<div class="sidebar">
<p class="first sidebar-title">Summary</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Topic:</th><td class="field-body">reST and Sphinx documentation</td>
</tr>
<tr class="field"><th class="field-name">Date:</th><td class="field-body">2013-10-28</td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Thomas Cokelaer</td>
</tr>
<tr class="field"><th class="field-name">status:</th><td class="field-body">mature</td>
</tr>
</tbody>
</table>
</div>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#update-setuptools-configuration-file" id="id1">Update setuptools configuration file</a></li>
<li><a class="reference internal" href="#obtain-a-valid-sphinx-configuration-file" id="id2">Obtain a valid sphinx configuration file</a></li>
<li><a class="reference internal" href="#update-the-package-metainfo-file" id="id3">Update the package metainfo file</a></li>
<li><a class="reference internal" href="#setup-the-source-rest-files" id="id4">Setup the source (ReST) files</a></li>
<li><a class="reference internal" href="#checking-the-configuration" id="id5">Checking the configuration</a></li>
<li><a class="reference internal" href="#what-are-static-and-build-directories" id="id6">What are _static and _build directories</a></li>
<li><a class="reference internal" href="#where-to-start" id="id7">Where to start ?</a></li>
</ul>
</div>
<div class="warning">
<p class="first admonition-title">Warning</p>
<p class="last">Remember that you must have yourn.</p>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="31%" />
<col width="38%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head" colspan="2">Inputs</th>
<th class="head">Output</th>
</tr>
<tr><th class="head">A</th>
<th class="head">B</th>
<th class="head">A or B</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>False</td>
<td>False</td>
<td>False</td>
</tr>
<tr><td>True</td>
<td>False</td>
<td>True</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="34%" />
<col width="31%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Header 1</th>
<th class="head">Header 2</th>
<th class="head">Header 3</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>body row 1</td>
<td>column 2</td>
<td>column 3</td>
</tr>
<tr><td>body row 2</td>
<td colspan="2">Cells may span columns.</td>
</tr>
<tr><td>body row 3</td>
<td rowspan="2">Cells may
span rows.</td>
<td rowspan="2"><ul class="first last simple">
<li>Cells</li>
<li>contain</li>
<li>blocks.</li>
</ul>
</td>
</tr>
<tr><td>body row 4</td>
</tr>
</tbody>
</table>
<div class="section" id="update-setuptools-configuration-file">
<h2><a class="toc-backref" href="#id1">Update setuptools configuration file</a></h2>
<p>Sphinx includes support to setuptools, therefore you can use the following command to build the HTML documentation:</p>
<pre class="literal-block">
python setup.py build_sphinx
</pre>
<pre class="doctest-block">
&gt;&gt;&gt; import math
&gt;&gt;&gt; print math.sqrt(2.)
</pre>
<p>However, you <strong>must</strong> tell where is the documentation, in particular the configuration file. This is done within the file <strong>setup.cfg</strong> where you will add those lines, if they are not present:</p>
<pre class="literal-block">
[build_sphinx]
source-dir = doc/
build-dir = doc/_build
all_files = 1
</pre>
<p>These options will tell Sphinx to look into the doc directory to search for a file called <strong>conf.py</strong> and to build the HTML outputs into the <strong>./doc/_build/html</strong> directory.</p>
</div>
<div class="section" id="obtain-a-valid-sphinx-configuration-file">
<h2><a class="toc-backref" href="#id2">Obtain a valid sphinx configuration file</a></h2>
<p>From openalea/starter/doc directory get the file called <strong>conf.py</strong> and copy it into the ./doc directory.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span><span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">openalea.misc.sphinx_configuration</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">openalea.misc.sphinx_tools</span> <span class="kn">import</span> <span class="n">sphinx_check_version</span>
<span class="kn">from</span> <span class="nn">openalea.deploy.metainfo</span> <span class="kn">import</span> <span class="n">read_metainfo</span>

<span class="n">sphinx_check_version</span><span class="p">()</span>                      <span class="c"># check that sphinx version is recent</span>
<span class="n">metadata</span> <span class="o">=</span> <span class="n">read_metainfo</span><span class="p">(</span><span class="s">&#39;../metainfo.ini&#39;</span><span class="p">)</span> <span class="c"># read metainfo from common file with setup.py</span>
<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;version&#39;</span><span class="p">,</span><span class="s">&#39;project&#39;</span><span class="p">,</span><span class="s">&#39;release&#39;</span><span class="p">,</span><span class="s">&#39;authors&#39;</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">,</span> <span class="s">&#39;package&#39;</span><span class="p">]:</span>
    <span class="k">exec</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s"> = &#39;</span><span class="si">%s</span><span class="s">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">metadata</span><span class="p">[</span><span class="n">key</span><span class="p">]))</span>

<span class="n">latex_documents</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;contents&#39;</span><span class="p">,</span> <span class="s">&#39;main.tex&#39;</span><span class="p">,</span> <span class="n">project</span> <span class="o">+</span> <span class="s">&#39; documentation&#39;</span><span class="p">,</span> <span class="n">authors</span><span class="p">,</span> <span class="s">&#39;manual&#39;</span><span class="p">)]</span>

<span class="n">project</span> <span class="o">=</span> <span class="n">project</span> <span class="o">+</span> <span class="s">&#39;.&#39;</span> <span class="o">+</span> <span class="n">package</span>
</pre></div>
</td></tr></table><div class="warning">
<p class="first admonition-title">Warning</p>
<p class="last">The file <strong>conf.py</strong> looks for another conf.py file that is common to all OpenAlea package that can be found  in <strong>./misc/src/openalea/misc/sphinx_configuration.py</strong>. You should not edit those files in principle.</p>
</div>
<div class="tip">
<p class="first admonition-title">Tip</p>
<p class="last">hello world this is tip!</p>
</div>
<div class="note">
<p class="first admonition-title">Note</p>
<p class="last">hello this is note</p>
</div>
</div>
<div class="section" id="update-the-package-metainfo-file">
<h2><a class="toc-backref" href="#id3">Update the package metainfo file</a></h2>
<p>The file conf.py search for a metainfo file called metainfo.ini that should be at the same level as <strong>`setup.py</strong> and <strong>setup.cfg</strong> files. The metainfo must contains version, project, name, package and authors tags but may contain other metainfo to be used by the <strong>setup.py</strong> file</p>
<pre class="literal-block">
[metainfo]
version = 0.8.0
release = 0.8
project = openalea        ; must be in [openalea, vplants, alinea]; used to scp files and titles
name = OpenAlea.Starter
namespace = openalea
package = starter         ; package is going to be used by Sphinx to create the title and scp the files
description= whatever description you want
long_description= whatever desription you want
authors= your name
authors_email = your emai
url = http://openalea.gforge.inria.fr
license = Cecill-C
</pre>
</div>
<div class="section" id="setup-the-source-rest-files">
<h2><a class="toc-backref" href="#id4">Setup the source (ReST) files</a></h2>
<p>To finalise you sphinx setup, you should look into an already setup package and from the <strong>doc</strong> directory, copy the Makefile, make.bat, contents.rst, user/index.rst, user/overview.txt and user/autosum.rst to get an architecture as follows:</p>
<pre class="literal-block">
|-- openalea
|   |-- yourpackage
|   |   |-- AUTHORS.txt
|   |   |-- ChangeLog.txt
|   |   |-- LICENSE.txt
|   |   |-- doc
|   |   |   |-- Makefile
|   |   |   |-- _static
|   |   |   |-- _build
|   |   |   |-- conf.py
|   |   |   |-- contents.rst
|   |   |   |-- make.bat
|   |   |   `-- user
|   |   |       |-- autosum.rst
|   |   |       |-- index.rst
|   |   |       `-- overview.txt
</pre>
</div>
<div class="section" id="checking-the-configuration">
<h2><a class="toc-backref" href="#id5">Checking the configuration</a></h2>
<p>the command should work without errors:</p>
<pre class="literal-block">
make html
</pre>
<p>and your HTML files should be available in:</p>
<pre class="literal-block">
./doc/_build/html/contents.html
</pre>
</div>
<div class="section" id="what-are-static-and-build-directories">
<h2><a class="toc-backref" href="#id6">What are _static and _build directories</a></h2>
<p>The <strong>_static</strong> directory is used by sphinx to store documents, images.
The <strong>_build</strong> directory is used by sphinx to store html and other built documents.</p>
<p>They must be present bu can be empty.</p>
</div>
<div class="section" id="where-to-start">
<h2><a class="toc-backref" href="#id7">Where to start ?</a></h2>
<p><strong>contents.rst</strong> is the main entry point. You should not change it too much so, so as to keep a page very similar to the other packages.</p>
</div>

        </div>
    </article>

<!-- UY BEGIN -->
<div id="uyan_frame"></div>
<script type="text/javascript">
    var uyan_config = {
        'su': 'blog/2015-01-test.html'
    };
</script>
<script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=1803538"></script>
<!-- UY END -->    </div>
<aside id="sidebar">
    <ul>
    <!--
        <li class="block li-0">
            <script>
                (function () {
                    var cx = '013354436722569247875:iw6mtkjxvvy';
                    var gcse = document.createElement('script');
                    gcse.type = 'text/javascript';
                    gcse.async = true;
                    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                            '//www.google.com/cse/cse.js?cx=' + cx;
                    var s = document.getElementsByTagName('script')[0];
                    s.parentNode.insertBefore(gcse, s);
                })();
            </script>
            <gcse:search></gcse:search>
        </li> -->
        <li class="block li-0">
            <a href="http://yuanboshe.github.io/blog/categories.html" title="Categories">
                <i class="icon-folder-open icon-large"></i>Categories
            </a>
            <ul>
                    <li class="li-1">
                        <a href="http://yuanboshe.github.io/blog/category/ros.html" title="ROS">
                            <i class="icon-folder-open icon-large"></i>ROS
                        </a>
                    </li>
                    <li class="li-1">
                        <a href="http://yuanboshe.github.io/blog/category/webqian-duan.html" title="WEB前端">
                            <i class="icon-folder-close icon-large"></i>WEB前端
                        </a>
                    </li>
            </ul>
        </li>
        <li class="block li-0">
            <p><a href="http://yuanboshe.github.io/blog/tags.html" title="Tags">
                <i class="icon-tags icon-large"></i>Tags
            </a></p>
                <span class="tag-1"><a href="http://yuanboshe.github.io/blog/tag/pcduino.html">pcduino</a></span> ,
                <span class="tag-4"><a href="http://yuanboshe.github.io/blog/tag/pelican.html">pelican</a></span> ,
                <span class="tag-4"><a href="http://yuanboshe.github.io/blog/tag/github.html">github</a></span> ,
                <span class="tag-4"><a href="http://yuanboshe.github.io/blog/tag/sphinx.html">sphinx</a></span> ,
                <span class="tag-1"><a href="http://yuanboshe.github.io/blog/tag/ros.html">ros</a></span> ,
                <span class="tag-1"><a href="http://yuanboshe.github.io/blog/tag/restructuredtext.html">reStructuredText</a></span> ,
        </li>
        <li class="block li-0">
            <a href="http://yuanboshe.github.io/blog/dates.html" title="Dates">
                <i class="icon-calendar icon-large"></i>Dates
            </a>
        </li>
            <li class="block li-0">
                <i class="icon-external-link"></i>Links
                <ul>
                        <li class="li-1"><a href="http://www.cnblogs.com/freedomshe" title="Old blog"><i
                                class="icon-external-link"></i>Old blog</a></li>
                </ul>
            </li>
    </ul>
    <em id="corner"></em>
</aside>
    <!-- pagers -->

    <!-- UJian Button BEGIN -->
    <script type="text/javascript">var ujian_config = {target: 1};</script>
    <script type="text/javascript" src="http://v1.ujian.cc/code/ujian.js?type=slide&fade=1&uid=1803538"></script>
    <a href="http://www.ujian.cc" style="border:0;"><img src="http://img.ujian.cc/pixel.png" alt="友荐云推荐" style="border:0;padding:0;margin:0;"/></a>
    <!-- UJian Button END -->
    </div>
</div>
<!-- ENDS MAIN -->

<footer>
    <div class="wrapper">
        <div class="footer-bottom">
            <div class="left">
                <script src="http://s19.cnzz.com/stat.php?id=5460084&web_id=5460084&show=pic"></script>
                Powered by Pelican ...
            </div>
        </div>
    </div>
</footer>

<!-- superfish -->
<link rel="stylesheet" media="screen" href="http://yuanboshe.github.io/theme/css/superfish.css"/>
<!-- ENDS superfish -->

<!-- prettyPhoto -->
<link rel="stylesheet" href="http://yuanboshe.github.io/theme/js/prettyPhoto/css/prettyPhoto.css"
      media="screen"/>
<!-- ENDS prettyPhoto -->

<!-- GOOGLE FONTS -->
<link href='http://fonts.googleapis.com/css?family=Yanone+Kaffeesatz:400,300' rel='stylesheet' type='text/css'>

<!-- Flex Slider -->
<link rel="stylesheet" href="http://yuanboshe.github.io/theme/css/flexslider.css">
<!-- ENDS Flex Slider -->

<!-- SKIN -->
<link rel="stylesheet" media="all" href="http://yuanboshe.github.io/theme/css/skin.css"/>
<link rel="stylesheet" media="all" href="http://yuanboshe.github.io/theme/css/style.css"/>
<link rel="stylesheet" media="all" href="http://yuanboshe.github.io/theme/css/code.css"/>

<!-- icons -->
<link rel="shortcut icon" href="http://yuanboshe.github.io/theme/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" media="all" href="http://yuanboshe.github.io/theme/css/font-awesome.css"/>
<link rel="stylesheet" media="all" href="http://yuanboshe.github.io/theme/css/pygments.css"/>

<!-- JS -->
<script src="http://yuanboshe.github.io/theme/js/jquery-1.6.4.min.js"></script>
<script src="http://yuanboshe.github.io/theme/js/css3-mediaqueries.js"></script>
<script src="http://yuanboshe.github.io/theme/js/custom.js"></script>
<script src="http://yuanboshe.github.io/theme/js/tabs.js"></script>

<!-- superfish -->
<script src="http://yuanboshe.github.io/theme/js/superfish-1.4.8/js/hoverIntent.js"></script>
<script src="http://yuanboshe.github.io/theme/js/superfish-1.4.8/js/superfish.js"></script>
<script src="http://yuanboshe.github.io/theme/js/superfish-1.4.8/js/supersubs.js"></script>
<!-- ENDS superfish -->

<!-- prettyPhoto -->
<script src="http://yuanboshe.github.io/theme/js/prettyPhoto/js/jquery.prettyPhoto.js"></script>
<!-- ENDS prettyPhoto -->

<!-- Flex Slider -->
<script src="http://yuanboshe.github.io/theme/js/jquery.flexslider-min.js"></script>
<!-- ENDS Flex Slider -->

<!-- modernizr -->
<script src="http://yuanboshe.github.io/theme/js/modernizr.js"></script>

<!-- reply move form -->
<script src="http://yuanboshe.github.io/theme/js/moveform.js"></script>

<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-36220570-2', 'yuanboshe.github.io');
    ga('send', 'pageview');

</script>
</body>
</html>